(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{552:function(e,t,n){"use strict";var a=n(10),o=n.n(a),i=n(12),r=n.n(i),s=n(528),l=n.n(s),c=n(537),u=n.n(c),p=function(e){var t=e.text,n=e.type,a=void 0===n?"input-validation":n;return o.a.createElement("div",{className:l()("field-error","field-error__".concat(a))},o.a.createElement(u.a,{size:24,icon:"notice-outline"})," ",o.a.createElement("span",null,t))};p.propTypes={text:r.a.string.isRequired,type:r.a.string},t.a=p},553:function(e,t,n){"use strict";n.d(t,"a",function(){return N});var a=n(532),o=n.n(a),i=n(107),r=n.n(i),s=n(108),l=n.n(s),c=n(530),u=n.n(c),p=n(529),d=n.n(p),m=n(531),h=n.n(m),f=n(34),b=n.n(f),g=n(10),v=n.n(g),y=n(12),k=n.n(y),C=n(528),E=n.n(C),w=n(1),N=function(e){function t(){return r()(this,t),u()(this,d()(t).apply(this,arguments))}return h()(t,e),l()(t,[{key:"render",value:function(){var e=E()(this.props.className,"form-setting-explanation",{"no-validate":this.props.noValidate,"is-indented":this.props.isIndented});return v.a.createElement("p",o()({},Object(w.omit)(this.props,"className","noValidate","isIndented"),{className:e}),this.props.children)}}]),t}(v.a.Component);b()(N,"displayName","FormSettingExplanation"),b()(N,"propTypes",{noValidate:k.a.bool,isIndented:k.a.bool,className:k.a.string}),b()(N,"defaultProps",{noValidate:!1,isIndented:!1})},565:function(e,t,n){"use strict";var a=n(532),o=n.n(a),i=n(535),r=n.n(i),s=n(107),l=n.n(s),c=n(108),u=n.n(c),p=n(530),d=n.n(p),m=n(529),h=n.n(m),f=n(531),b=n.n(f),g=n(34),v=n.n(g),y=n(10),k=n.n(y),C=n(528),E=n.n(C),w=n(537),N=n.n(w),_=n(12),R=n.n(_),O=function(e){var t=e.className,n=e.compact,a=e.displayAsLink,o=e.highlight,i=e.href,r=e.onClick;return E()("card",t,{"is-card-link":a||!!i,"is-clickable":!!r,"is-compact":n,"is-highlight":o},!!o&&"is-"+o)},I=function(e){function t(){return l()(this,t),d()(this,h()(t).apply(this,arguments))}return b()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=(e.compact,e.displayAsLink),a=(e.highlight,e.tagName),i=e.href,s=e.target,l=r()(e,["children","compact","displayAsLink","highlight","tagName","href","target"]);return i?k.a.createElement("a",o()({},l,{href:i,target:s,className:O(this.props)}),k.a.createElement(N.a,{className:"card__link-indicator",icon:s?"external":"chevron-right"}),t):k.a.createElement(a,o()({},l,{className:O(this.props)}),n&&k.a.createElement(N.a,{className:"card__link-indicator",icon:s?"external":"chevron-right"}),t)}}]),t}(y.PureComponent);v()(I,"propTypes",{className:R.a.string,displayAsLink:R.a.bool,href:R.a.string,tagName:R.a.oneOfType([R.a.func,R.a.string]).isRequired,target:R.a.string,compact:R.a.bool,highlight:R.a.oneOf([!1,"error","info","success","warning"])}),v()(I,"defaultProps",{tagName:"div",highlight:!1}),t.a=I},566:function(e,t,n){"use strict";var a=n(532),o=n.n(a),i=n(107),r=n.n(i),s=n(108),l=n.n(s),c=n(530),u=n.n(c),p=n(529),d=n.n(p),m=n(534),h=n.n(m),f=n(531),b=n.n(f),g=n(34),v=n.n(g),y=n(12),k=n.n(y),C=n(10),E=n.n(C),w=n(1),N=n(590),_=n(116),R=n.n(_),O=n(528),I=n.n(O),D=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=u()(this,(e=d()(t)).call.apply(e,[this].concat(o))),v()(h()(n),"_onButtonClick",function(e){e.onClick?e.onClick(n._close.bind(h()(n),e.action)):n._close(e.action)}),v()(h()(n),"_close",function(e){n.props.onDialogClose&&n.props.onDialogClose(e)}),n}return b()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.additionalClassNames,n=e.isBackdropVisible,a=e.baseClassName,o=e.isFullScreen,i=e.shouldCloseOnEsc,r=a+"__content",s=I()(a,"card",t),l=I()(a+"__backdrop",{"is-full-screen":!!o,"is-hidden":!n});return E.a.createElement(R.a,{isOpen:this.props.isVisible,onRequestClose:this._close,closeTimeoutMS:this.props.leaveTimeout,contentLabel:this.props.label,appElement:document.getElementById("wpcom"),overlayClassName:l,className:s,htmlOpenClassName:"ReactModal__Html--open",role:"dialog",shouldCloseOnEsc:i},E.a.createElement("div",{className:I()(this.props.className,r),tabIndex:"-1"},this.props.children),this._renderButtonsBar())}},{key:"_renderButtonsBar",value:function(){var e=this.props.baseClassName+"__action-buttons";return this.props.buttons?E.a.createElement("div",{className:e},this.props.buttons.map(this._renderButton,this)):null}},{key:"_renderButton",value:function(e,t){if(E.a.isValidElement(e))return E.a.cloneElement(e,{key:"dialog-button-"+t});var n=this._getButtonClasses(e),a=this._onButtonClick.bind(this,e);return E.a.createElement("button",{key:e.action,className:n,"data-e2e-button":e.action,"data-tip-target":"dialog-base-action-".concat(e.action),onClick:a,disabled:!!e.disabled},E.a.createElement("span",{className:this.props.baseClassName+"__button-label"},e.label))}},{key:"_getButtonClasses",value:function(e){var t=e.className||"button";return(e.isPrimary||1===this.props.buttons.length)&&(t+=" is-primary"),e.additionalClassNames&&(t+=" "+e.additionalClassNames),t}}]),t}(C.Component);v()(D,"propTypes",{additionalClassNames:k.a.oneOfType([k.a.object,k.a.string]),autoFocus:k.a.bool,baseClassName:k.a.string,buttons:k.a.array,className:k.a.string,isBackdropVisible:k.a.bool,isFullScreen:k.a.bool,isVisible:k.a.bool,label:k.a.string,leaveTimeout:k.a.number,onDialogClose:k.a.func,shouldCloseOnEsc:k.a.bool}),v()(D,"defaultProps",{baseClassName:"dialog",isBackdropVisible:!0,isFullScreen:!0,autoFocus:!0,label:""});var x=D,P=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=u()(this,(e=d()(t)).call.apply(e,[this].concat(o))),v()(h()(n),"checkOnClosed",function(e){null===e&&Object(w.defer)(n.props.onClosed)}),v()(h()(n),"onDialogClose",function(e){n.props.onClose&&n.props.onClose(e)}),n}return b()(t,e),l()(t,[{key:"render",value:function(){return E.a.createElement(N.a,null,E.a.createElement(x,o()({},this.props,{ref:this.checkOnClosed,key:"dialog",onDialogClose:this.onDialogClose})))}}]),t}(C.Component);v()(P,"propTypes",{isVisible:k.a.bool,baseClassName:k.a.string,leaveTimeout:k.a.number,onClose:k.a.func,onClosed:k.a.func,shouldCloseOnEsc:k.a.bool}),v()(P,"defaultProps",{isVisible:!1,leaveTimeout:200,onClosed:w.noop});t.a=P},578:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var a=n(532),o=n.n(a),i=n(535),r=n.n(i),s=n(107),l=n.n(s),c=n(108),u=n.n(c),p=n(530),d=n.n(p),m=n(529),h=n.n(m),f=n(531),b=n.n(f),g=n(34),v=n.n(g),y=n(10),k=n.n(y),C=n(12),E=n.n(C),w=n(528),N=n.n(w),_=function(e){function t(){return l()(this,t),d()(this,h()(t).apply(this,arguments))}return b()(t,e),u()(t,[{key:"render",value:function(){var e=N()("button",this.props.className,{"is-compact":this.props.compact,"is-primary":this.props.primary,"is-scary":this.props.scary,"is-busy":this.props.busy,"is-borderless":this.props.borderless});if(this.props.href){var t=this.props,n=(t.compact,t.primary,t.scary,t.busy,t.borderless,t.type,r()(t,["compact","primary","scary","busy","borderless","type"])),a=n.target?(n.rel||"").replace(/noopener|noreferrer/g,"")+" noopener noreferrer":n.rel;return k.a.createElement("a",o()({},n,{rel:a,className:e}))}var i=this.props,s=(i.compact,i.primary,i.scary,i.busy,i.borderless,i.target,i.rel,r()(i,["compact","primary","scary","busy","borderless","target","rel"]));return k.a.createElement("button",o()({},s,{className:e}))}}]),t}(y.PureComponent);v()(_,"propTypes",{compact:E.a.bool,primary:E.a.bool,scary:E.a.bool,busy:E.a.bool,type:E.a.string,href:E.a.string,borderless:E.a.bool,target:E.a.string,rel:E.a.string}),v()(_,"defaultProps",{type:"button"})},590:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var a=n(107),o=n.n(a),i=n(108),r=n.n(i),s=n(530),l=n.n(s),c=n(529),u=n.n(c),p=n(534),d=n.n(p),m=n(531),h=n.n(m),f=n(34),b=n.n(f),g=n(78),v=n.n(g),y=n(12),k=n.n(y),C=n(10),E=n.n(C),w=n(109),N=n(607),_=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"renderChildren",function(){var e;e=n.props&&(Object.keys(n.props).length>1||!n.props.children)?E.a.createElement("div",n.props,n.props.children):n.props.children,n.context.store&&(e=E.a.createElement(w.a,{store:n.context.store},E.a.createElement(N.b,null,e))),v.a.render(e,n.container)}),n}return h()(t,e),r()(t,[{key:"componentDidMount",value:function(){this.container=document.createElement("div"),document.body.appendChild(this.container),this.renderChildren()}},{key:"componentDidUpdate",value:function(){this.renderChildren()}},{key:"componentWillUnmount",value:function(){this.container&&(v.a.unmountComponentAtNode(this.container),document.body.removeChild(this.container),delete this.container)}},{key:"render",value:function(){return null}}]),t}(E.a.Component);b()(_,"contextTypes",{store:k.a.object})},591:function(e,t,n){"use strict";var a=n(107),o=n.n(a),i=n(108),r=n.n(i),s=n(530),l=n.n(s),c=n(529),u=n.n(c),p=n(534),d=n.n(p),m=n(531),h=n.n(m),f=n(34),b=n.n(f),g=n(12),v=n.n(g),y=n(10),k=n.n(y),C=n(528),E=n.n(C),w=n(35),N=n(1),_=n(565),R=n(592),O=n(537),I=n.n(O),D=n(564),x=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"state",{expanded:n.props.expanded}),b()(d()(n),"onClick",function(){n.props.children&&n.setState({expanded:!n.state.expanded}),n.props.onClick&&n.props.onClick(),n.state.expanded?n.props.onClose(n.props.cardKey):n.props.onOpen(n.props.cardKey)}),n}return h()(t,e),r()(t,[{key:"componentWillReceiveProps",value:function(e){e.expanded!==this.props.expanded&&this.setState({expanded:e.expanded})}},{key:"getClickAction",value:function(){if(!this.props.disabled)return this.onClick}},{key:"getActionButton",value:function(){return this.state.expanded&&this.props.actionButtonExpanded||this.props.actionButton}},{key:"renderActionButton",value:function(){var e=this.props.clickableHeader?null:this.getClickAction();if(this.props.actionButton)return k.a.createElement("div",{className:"foldable-card__action",onClick:e},this.getActionButton());if(this.props.children){var t=this.props.screenReaderText||this.props.translate("More");return k.a.createElement("button",{disabled:this.props.disabled,type:"button",className:"foldable-card__action foldable-card__expand",onClick:e},k.a.createElement(D.a,null,t),k.a.createElement(I.a,{icon:this.props.icon,size:24}))}}},{key:"renderContent",value:function(){return k.a.createElement("div",{className:"foldable-card__content"},this.props.children)}},{key:"renderHeader",value:function(){var e=this.props.summary?k.a.createElement("span",{className:"foldable-card__summary"},this.props.summary," "):null,t=this.props.expandedSummary?k.a.createElement("span",{className:"foldable-card__summary-expanded"},this.props.expandedSummary," "):null,n=this.props.clickableHeader?this.getClickAction():null,a=E()("foldable-card__header",{"is-clickable":!!this.props.clickableHeader,"has-border":!!this.props.summary});return k.a.createElement("div",{className:a,onClick:n},k.a.createElement("span",{className:"foldable-card__main"},this.props.header," "),k.a.createElement("span",{className:"foldable-card__secondary"},e,t,this.renderActionButton()))}},{key:"render",value:function(){var e=this.props.compact?R.a:_.a,t=E()("foldable-card",this.props.className,{"is-disabled":!!this.props.disabled,"is-expanded":!!this.state.expanded,"has-expanded-summary":!!this.props.expandedSummary});return k.a.createElement(e,{className:t},this.renderHeader(),this.state.expanded&&this.renderContent())}}]),t}(y.Component);b()(x,"displayName","FoldableCard"),b()(x,"propTypes",{actionButton:v.a.element,actionButtonExpanded:v.a.element,cardKey:v.a.string,compact:v.a.bool,disabled:v.a.bool,expandedSummary:v.a.oneOfType([v.a.string,v.a.element]),expanded:v.a.bool,icon:v.a.string,onClick:v.a.func,onClose:v.a.func,onOpen:v.a.func,screenReaderText:v.a.oneOfType([v.a.string,v.a.bool]),summary:v.a.oneOfType([v.a.string,v.a.element])}),b()(x,"defaultProps",{onOpen:N.noop,onClose:N.noop,cardKey:"",icon:"chevron-down",expanded:!1,screenReaderText:!1}),t.a=Object(w.localize)(x)},592:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(532),o=n.n(a),i=n(10),r=n.n(i),s=n(528),l=n.n(s),c=n(565);function u(e){return r.a.createElement(c.a,o()({},e,{className:l()(e.className,"is-compact")}),e.children)}},594:function(e,t,n){"use strict";var a=n(10),o=n.n(a),i=n(12),r=n.n(i),s=n(548),l=n(570),c=n(554),u=n(552),p=n(553),d=function(e){var t=e.id,n=e.valuesMap,i=e.title,r=e.description,d=e.value,m=e.updateValue,h=e.error,f=e.disabled,b=e.className,g=Object(a.useCallback)(function(e){return m(e.target.value,e)},[m]);return o.a.createElement(s.a,{className:b},o.a.createElement(c.a,null,i),o.a.createElement(l.a,{id:t,name:t,value:d,onChange:g,disabled:Boolean(f),isError:Boolean(h)},Object.keys(n).map(function(e){return o.a.createElement("option",{key:e,value:e},n[e])})),h&&"string"===typeof h&&o.a.createElement(u.a,{text:h}),!h&&r&&o.a.createElement(p.a,null,r))};d.propTypes={id:r.a.string.isRequired,valuesMap:r.a.object.isRequired,title:r.a.node,description:r.a.string,value:r.a.string.isRequired,updateValue:r.a.func.isRequired,error:r.a.oneOfType([r.a.string,r.a.bool]),disabled:r.a.bool,className:r.a.string},t.a=d},637:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(){return"https://wordpress.com"}},687:function(e,t,n){"use strict";var a=n(107),o=n.n(a),i=n(108),r=n.n(i),s=n(530),l=n.n(s),c=n(529),u=n.n(c),p=n(534),d=n.n(p),m=n(531),h=n.n(m),f=n(34),b=n.n(f),g=n(12),v=n.n(g),y=n(10),k=n.n(y),C=n(78),E=n.n(C),w=n(109),N=n(47),_=n.n(N),R=n(528),O=n.n(R),I=n(702),D=n.n(I),x=n(1),P=n(590),T=n(77),j=n.n(T),S=n(718),q=n.n(S),L=_()("calypso:popover:util");function M(){var e={};return e.top=window.scrollY,e.left=window.scrollX,e.width=window.innerWidth,e.height=window.innerHeight,e.right=e.left+e.width,e.bottom=e.top+e.height,L("viewport: %o",e),e}var A={top:"bottom",bottom:"top",left:"right",right:"left"},B={top:"right",left:"top",bottom:"left",right:"bottom"},z=M();function V(){z=M()}var F=!1,H=function(){if(F)return L("window events already bound");F=!0,L("bind handlers to `resize` and `scroll` events"),window.addEventListener("resize",V,!0),window.addEventListener("scroll",V,!0)},U=function(){if(!F)return L("window events are not bound");F=!1,L("unbind handlers to `resize` and `scroll` events"),window.removeEventListener("resize",V,!0),window.removeEventListener("scroll",V,!0)},K=function(e,t,n){var a=q()(n),o=t.clientHeight,i=t.clientWidth,r={top:a.top-o,bottom:z.height-a.bottom-o,left:a.left-i,right:z.width-a.right-i},s=e.split(/\s+/),l=j()(s,1)[0],c=j()(s,2)[1],u=function(e,t){for(var n,a=[e,A[e],B[e],A[B[e]]],o=-1/0,i=0,r=a.length;i<r;i++){var s=a[i],l=t[s];if(l>0)return s;l>o&&(o=l,n=e)}return n}(l,r);return c!==u&&c!==A[u]||(c=null),function(e,t,n,a,o,i){for(var r,s="top"===e||"bottom"===e,l=t?[s?"".concat(e," ").concat(t):"".concat(t," ").concat(e),e,s?"".concat(e," ").concat(A[t]):"".concat(A[t]," ").concat(e)]:[e,s?"".concat(e," ").concat(B[e]):"".concat(B[e]," ").concat(e),s?"".concat(e," ").concat(A[B[e]]):"".concat(A[B[e]]," ").concat(e)],c=0,u=o*i,p=0,d=l.length;p<d;p++){var m=l[p],h=W(m,n,a),f=h.left+o,b=h.top+i,g=Math.min(h.top<z.top?b-z.top:z.bottom-h.top,i),v=Math.min(h.left<z.left?f-z.left:z.right-h.left,o),y=v*g;if(y===u)return m;y>c&&(c=y,r=m)}return r}(u,c,t,n,i,o)||e};function W(e,t,n,a){var o=q()(t);if(!o)throw new Error("could not get bounding client rect of Tip element");var i=o.width,r=o.height,s=q()(n);if(!s)throw new Error("could not get bounding client rect of `target`");var l=s.width,c=s.height,u=function(e,t){var n=t.body||t.getElementsByTagName("body")[0],a=t.documentElement||n.parentNode,o=a.clientTop||n.clientTop||0,i=a.clientLeft||n.clientLeft||0,r=window.pageYOffset||a.scrollTop,s=window.pageXOffset||a.scrollLeft;return{top:e.top+r-o,left:e.left+s-i}}(s,document);if(!u)throw new Error("could not determine page offset of `target`");var p={};switch(e){case"top":p={top:u.top-r,left:a&&a.left?u.left+a.left:u.left+l/2-i/2};break;case"bottom":p={top:u.top+c,left:a&&a.left?u.left+a.left:u.left+l/2-i/2};break;case"right":p={top:u.top+c/2-r/2,left:u.left+l};break;case"left":p={top:u.top+c/2-r/2,left:u.left-i};break;case"top left":p={top:u.top-r,left:u.left+l/2-i+15};break;case"top right":p={top:u.top-r,left:u.left+l/2-15};break;case"bottom left":p={top:u.top+c,left:u.left+l/2-i+15};break;case"bottom right":p={top:u.top+c,left:u.left+l/2-15};break;case"left top":p={top:u.top+c/2-r,left:u.left-i};break;case"left bottom":p={top:u.top+c/2,left:u.left-i};break;case"right top":p={top:u.top+c/2-r,left:u.left+l};break;case"right bottom":p={top:u.top+c/2,left:u.left+l};break;default:throw new Error('invalid position "'.concat(e,'"'))}return p}var Y=function(){},J=_()("calypso:popover"),X=new Set,G=function(e){function t(e){var n;return o()(this,t),n=l()(this,u()(t).call(this,e)),b()(d()(n),"isUpdatingPosition",!1),n.setPopoverId(e.id),n.setDOMBehavior=n.setDOMBehavior.bind(d()(n)),n.setPosition=n.setPosition.bind(d()(n)),n.onClickout=n.onClickout.bind(d()(n)),n.onKeydown=n.onKeydown.bind(d()(n)),n.onWindowChange=n.onWindowChange.bind(d()(n)),n.state={show:e.isVisible,left:-99999,top:-99999,positionClass:n.getPositionClass(e.position)},n}return h()(t,e),r()(t,[{key:"componentDidMount",value:function(){this.state.show&&(this.bindEscKeyListener(),this.bindDebouncedReposition(),H())}},{key:"componentWillReceiveProps",value:function(e){if(this.domContext=E.a.findDOMNode(e.context),!e.isVisible)return null;this.setPosition()}},{key:"componentDidUpdate",value:function(e,t){var n=this,a=this.props.isVisible;return!t.show&&this.state.show&&(this.bindEscKeyListener(),this.bindDebouncedReposition(),H()),a!==e.isVisible&&(a?this.show():this.hide()),this.domContainer&&this.domContext&&a?void(this.isUpdatingPosition||(this.debug("requesting to update position after render completes"),requestAnimationFrame(function(){X.has(n.id)&&n.domContainer&&n.domContext&&a?(n.setPosition(),n.isUpdatingPosition=!1):n.isUpdatingPosition=!1}),this.isUpdatingPosition=!0)):null}},{key:"componentWillUnmount",value:function(){this.debug("unmounting .... "),this.unbindClickoutHandler(),this.unbindDebouncedReposition(),this.unbindEscKeyListener(),U(),X.delete(this.id),J("current popover instances: ",X.size)}},{key:"bindEscKeyListener",value:function(){if(!this.props.closeOnEsc)return null;this.debug("adding escKey listener ..."),document.addEventListener("keydown",this.onKeydown,!0)}},{key:"unbindEscKeyListener",value:function(){if(!this.props.closeOnEsc)return null;this.debug("unbinding `escKey` listener ..."),document.removeEventListener("keydown",this.onKeydown,!0)}},{key:"onKeydown",value:function(e){if(27!==e.keyCode)return null;this.close(!0)}},{key:"bindClickoutHandler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.domContainer;return e?this._clickoutHandlerReference?(this.debug("clickout event already bound"),null):(this.debug("binding `clickout` event"),void(this._clickoutHandlerReference=D()(e,this.onClickout))):(this.debug("no element to bind clickout "),null)}},{key:"unbindClickoutHandler",value:function(){this._clickoutHandlerReference&&(this.debug("unbinding `clickout` listener ..."),this._clickoutHandlerReference(),this._clickoutHandlerReference=null)}},{key:"onClickout",value:function(e){var t=this.domContext&&this.domContext.contains&&!this.domContext.contains(e.target);if(this.props.ignoreContext&&t){var n=E.a.findDOMNode(this.props.ignoreContext);t=t&&n&&n.contains&&!n.contains(e.target)}t&&this.close()}},{key:"bindDebouncedReposition",value:function(){window.addEventListener("scroll",this.onWindowChange,!0),window.addEventListener("resize",this.onWindowChange,!0)}},{key:"unbindDebouncedReposition",value:function(){this.willReposition&&(window.cancelAnimationFrame(this.willReposition),this.willReposition=null),window.removeEventListener("scroll",this.onWindowChange,!0),window.removeEventListener("resize",this.onWindowChange,!0),this.debug("unbinding `debounce reposition` ...")}},{key:"onWindowChange",value:function(){this.willReposition=window.requestAnimationFrame(this.setPosition)}},{key:"setDOMBehavior",value:function(e){if(!e)return this.unbindClickoutHandler(),null;this.debug("setting DOM behavior"),this.bindClickoutHandler(e),this.domContainer=e,this.domContext=E.a.findDOMNode(this.props.context),this.setPosition()}},{key:"getPositionClass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.position;return"is-".concat(e.replace(/\s+/g,"-"))}},{key:"adjustRtlPosition",value:function(e){if(this.props.isRtl)switch(e){case"top right":case"right top":return"top left";case"right":return"left";case"bottom right":case"right bottom":return"bottom left";case"bottom left":case"left bottom":return"bottom right";case"left":return"right";case"top left":case"left top":return"top right"}return e}},{key:"computePosition",value:function(){if(!this.props.isVisible)return null;var e=this.domContainer,t=this.domContext,n=this.props,a=n.position,o=n.relativePosition;if(!e||!t)return this.debug("[WARN] no DOM elements to work"),null;var i=a;this.debug("position: %o",i),this.props.autoRtl&&(i=this.adjustRtlPosition(i),this.debug("RTL adjusted position: %o",i)),this.props.autoPosition&&(i=K(i,e,t),this.debug("suggested position: %o",i));var r=Object.assign({},function(e,t){var n=q()(t).width;return e.left=Math.max(0,Math.min(e.left,z.width-n)),e}(W(i,e,t,o),e),{positionClass:this.getPositionClass(i)});return this.debug("updating reposition: ",r),r}},{key:"debug",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];J.apply(void 0,["[%s] ".concat(e),this.id].concat(n))}},{key:"setPopoverId",value:function(e){this.id=e||"pop__".concat(Object(x.uniqueId)()),X.add(this.id),this.debug("creating ..."),J("current popover instances: ",X.size)}},{key:"setPosition",value:function(){var e;if(this.debug("updating position"),!(e=this.props.customPosition?Object.assign({positionClass:this.getPositionClass(this.constructor.defaultProps.position)},this.props.customPosition):this.computePosition()))return null;this.willReposition=null,this.setState(e)}},{key:"getStylePosition",value:function(){var e=this.state;return{left:e.left,top:e.top}}},{key:"show",value:function(){var e=this;if(!this.props.showDelay)return this.setState({show:!0}),null;this.debug("showing in %o","".concat(this.props.showDelay,"ms")),this.clearShowTimer(),this._openDelayTimer=setTimeout(function(){e.setState({show:!0})},this.props.showDelay)}},{key:"hide",value:function(){this.unbindClickoutHandler(),this.unbindDebouncedReposition(),this.unbindEscKeyListener(),U(),this.setState({show:!1}),this.clearShowTimer()}},{key:"clearShowTimer",value:function(){if(!this._openDelayTimer)return null;clearTimeout(this._openDelayTimer),this._openDelayTimer=null}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.props.isVisible)return this.debug("popover should be already closed"),null;this.props.onClose(e)}},{key:"render",value:function(){if(!this.state.show)return this.debug("is hidden. return no render"),null;if(!this.props.context)return this.debug("No `context` to tie. return no render"),null;var e=O()("popover",this.props.className,this.state.positionClass);return this.debug("rendering ..."),k.a.createElement(P.a,{className:this.props.rootClassName},k.a.createElement("div",{style:this.getStylePosition(),className:e},k.a.createElement("div",{className:"popover__arrow"}),k.a.createElement("div",{ref:this.setDOMBehavior,className:"popover__inner"},this.props.children)))}}]),t}(y.Component);b()(G,"propTypes",{autoPosition:v.a.bool,autoRtl:v.a.bool,className:v.a.string,closeOnEsc:v.a.bool,id:v.a.string,ignoreContext:v.a.shape({getDOMNode:v.a.function}),isRtl:v.a.bool,isVisible:v.a.bool,position:v.a.oneOf(["top","top right","right","bottom right","bottom","bottom left","left","top left"]),rootClassName:v.a.string,showDelay:v.a.number,onClose:v.a.func,onShow:v.a.func,relativePosition:v.a.shape({left:v.a.number}),customPosition:v.a.shape({top:v.a.number,left:v.a.number,positionClass:v.a.oneOf(["top","right","bottom","left"])})}),b()(G,"defaultProps",{autoPosition:!0,autoRtl:!0,className:"",closeOnEsc:!0,isRtl:!1,isVisible:!1,position:"top",showDelay:0,onClose:Y,onShow:Y});t.a=Object(w.b)(function(e){return{isRtl:document.body.classList.contains("rtl")}})(G)},719:function(e,t,n){"use strict";var a=n(107),o=n.n(a),i=n(108),r=n.n(i),s=n(530),l=n.n(s),c=n(529),u=n.n(c),p=n(534),d=n.n(p),m=n(531),h=n.n(m),f=n(34),b=n.n(f),g=n(109),v=n(35),y=n(12),k=n.n(y),C=n(10),E=n.n(C),w=n(1),N=(n(810),n(653)),_=n(537),R=n.n(_),O=n(609),I=n.n(O),D=n(30),x=n(822),P=n(528),T=n.n(P),j=n(578),S=n(687),q=function(e){return"HR"===e.tagName},L=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"menu",E.a.createRef()),b()(d()(n),"_setPropsOnChild",function(e){if(null==e)return e;var t=n._onClose.bind(d()(n),e.props.action),a=t;return e.props.onClick&&(a=Object(w.over)([e.props.onClick,t])),E.a.cloneElement(e,{onClick:a})}),b()(d()(n),"_onShow",function(){var e=n.menu.current;n._previouslyFocusedElement=document.activeElement,e&&e.focus()}),b()(d()(n),"_getClosestSibling",function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=n.menu.current,o=a.firstChild,i=a.lastChild;if(t||(o=a.lastChild,i=a.firstChild),e===a)return o;var r=e[t?"nextSibling":"previousSibling"]||i;return q(r)?n._getClosestSibling(r,t):r}),b()(d()(n),"_onKeyDown",function(e){var t,a=e.target,o=!1;switch(e.keyCode){case 9:n.props.onClose(),o=!0;break;case 38:t=n._getClosestSibling(a,!1),o=!0;break;case 40:t=n._getClosestSibling(a,!0),o=!0}t&&t.focus(),o&&e.preventDefault()}),b()(d()(n),"_onClose",function(e){n._previouslyFocusedElement&&(n._previouslyFocusedElement.focus(),n._previouslyFocusedElement=null),n.props.onClose&&n.props.onClose(e)}),n}return h()(t,e),r()(t,[{key:"componentWillUnmount",value:function(){this._previouslyFocusedElement=null}},{key:"render",value:function(){var e=this.props,t=e.popoverComponent,n=e.autoPosition,a=e.className,o=e.context,i=e.customPosition,r=e.isVisible,s=e.popoverTitle,l=e.position,c=e.rootClassName;return E.a.createElement(t,{onClose:this._onClose,onShow:this._onShow,autoPosition:n,className:a,context:o,customPosition:i,isVisible:r,popoverTitle:s,position:l,rootClassName:c},E.a.createElement("div",{ref:this.menu,role:"menu",className:"popover__menu",onKeyDown:this._onKeyDown,tabIndex:"-1"},E.a.Children.map(this.props.children,this._setPropsOnChild,this)))}}]),t}(C.Component);b()(L,"propTypes",{autoPosition:k.a.bool,isVisible:k.a.bool.isRequired,onClose:k.a.func.isRequired,position:k.a.string,className:k.a.string,rootClassName:k.a.string,popoverComponent:k.a.func,popoverTitle:k.a.string,customPosition:k.a.object}),b()(L,"defaultProps",{autoPosition:!0,position:"top",popoverComponent:S.a});var M=L,A=(n(811),function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"state",{isMenuVisible:!1}),b()(d()(n),"popoverContext",E.a.createRef()),b()(d()(n),"handleClick",function(e){var t=n.props.onClick,a=n.state.isMenuVisible;t(e),a?n.hideMenu():n.showMenu()}),b()(d()(n),"hideMenu",function(){return n.toggleMenu(!1)}),b()(d()(n),"showMenu",function(){return n.toggleMenu(!0)}),n}return h()(t,e),r()(t,[{key:"toggleMenu",value:function(e){this.props.disabled||(this.setState({isMenuVisible:e}),this.props.onToggle(e))}},{key:"render",value:function(){var e=this.props,t=e.toggleTitle,n=e.translate,a=e.position,o=e.children,i=e.disabled,r=e.className,s=e.popoverClassName,l=this.state.isMenuVisible,c=T()("ellipsis-menu",r,{"is-menu-visible":l,"is-disabled":i}),u=T()("ellipsis-menu__menu","popover",s);return E.a.createElement("span",{className:c},E.a.createElement(j.a,{ref:this.popoverContext,onClick:this.handleClick,title:t||n("Toggle menu"),borderless:!0,disabled:i,className:"ellipsis-menu__toggle"},E.a.createElement(R.a,{icon:"ellipsis",className:"ellipsis-menu__toggle-icon"})),E.a.createElement(M,{isVisible:l,onClose:this.hideMenu,position:a,context:this.popoverContext.current,className:u},o))}}]),t}(C.Component));b()(A,"propTypes",{translate:k.a.func,toggleTitle:k.a.string,position:k.a.string,disabled:k.a.bool,onClick:k.a.func,onToggle:k.a.func,popoverClassName:k.a.string}),b()(A,"defaultProps",{onClick:w.noop,onToggle:w.noop});var B=Object(v.localize)(A),z=n(532),V=n.n(z),F=(n(812),function(e){function t(){return o()(this,t),l()(this,u()(t).apply(this,arguments))}return h()(t,e),r()(t,[{key:"render",value:function(){var e=T()("external-link",this.props.className,{"icon-first":!!this.props.showIconFirst},{"has-icon":!!this.props.icon}),t=Object(w.assign)({},Object(w.omit)(this.props,"icon","iconSize","showIconFirst","iconClassName"),{className:e,rel:"external"});t.target&&(t.rel=t.rel.concat(" noopener noreferrer"));var n=E.a.createElement(R.a,{className:this.props.iconClassName,icon:"external",size:this.props.iconSize});return E.a.createElement("a",t,this.props.icon&&this.props.showIconFirst&&n,this.props.children,this.props.icon&&!this.props.showIconFirst&&n)}}]),t}(C.Component));b()(F,"defaultProps",{iconSize:18,showIconFirst:!1}),b()(F,"propTypes",{className:k.a.string,href:k.a.string,onClick:k.a.func,icon:k.a.bool,iconSize:k.a.number,target:k.a.string,showIconFirst:k.a.bool,iconClassName:k.a.string});var H=F,U=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"handleMouseOver",function(e){n.props.focusOnHover&&e.target.focus(),n.props.onMouseOver()}),n}return h()(t,e),r()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.href,o=e.icon,i=e.isSelected,r=e.isExternalLink,s=Object(w.omit)(this.props,"icon","focusOnHover","isSelected","isExternalLink","className","itemComponent"),l=T()("popover__menu-item",n,{"is-selected":i}),c=this.props.itemComponent;return r&&a?(c=H,s.icon=!0):a&&(c="a"),E.a.createElement(c,V()({role:"menuitem",onMouseOver:this.handleMouseOver,tabIndex:"-1",className:l},s),o&&E.a.createElement(R.a,{icon:o,size:18}),t)}}]),t}(C.Component);b()(U,"propTypes",{href:k.a.string,className:k.a.string,isSelected:k.a.bool,icon:k.a.string,focusOnHover:k.a.bool,onMouseOver:k.a.func,isExternalLink:k.a.bool,itemComponent:k.a.oneOfType([k.a.func,k.a.string])}),b()(U,"defaultProps",{isSelected:!1,focusOnHover:!0,onMouseOver:w.noop,itemComponent:"button"});var K=n(566),W=n(556),Y=n(546),J=n(540),X=function(e){var t=e.orderId,n=e.siteId,a=e.refundDialog,o=e.createdDate,i=e.refundableAmount,r=e.currency,s=e.labelId,l=e.translate,c=e.moment,u=e.label,p=void 0===u?{}:u,d=function(){return I()(i,r)},m=function(){return e.closeRefundDialog(t,n)},h=[{action:"cancel",label:l("Cancel"),onClick:m},{action:"confirm",onClick:function(){return e.confirmRefund(t,n)},isPrimary:!0,disabled:a&&a.isSubmitting,additionalClassNames:a&&a.isSubmitting?"is-busy":"",label:l("Refund label (-%(amount)s)",{args:{amount:d()}})}];return E.a.createElement(K.a,{additionalClassNames:"label-refund-modal woocommerce wcc-root",isVisible:Boolean(a&&a.labelId===s),onClose:m,buttons:h},E.a.createElement(W.a,null,l("Request a refund")),E.a.createElement("p",null,l("You can request a refund for a shipping label that has not been used to ship a package. It will take at least %(days)s days to process.",{args:{days:"dhlexpress"===p.carrier_id?"31":"14"}})),E.a.createElement("dl",null,E.a.createElement("dt",null,l("Purchase date")),E.a.createElement("dd",null,c(o).format("LLL")),E.a.createElement("dt",null,l("Amount eligible for refund")),E.a.createElement("dd",null,d())))};X.propTypes={siteId:k.a.number.isRequired,orderId:k.a.number.isRequired,refundDialog:k.a.object,createdDate:k.a.number,refundableAmount:k.a.number,currency:k.a.string,labelId:k.a.number,closeRefundDialog:k.a.func.isRequired,confirmRefund:k.a.func.isRequired};var G=Object(g.b)(function(e,t){var n=t.orderId,a=t.siteId,o=t.labelId,i=Object(J.t)(e,n,a),r=Object(J.j)(e,n,a);return{refundDialog:i?r.refundDialog:{},label:Object(J.g)(e,n,a,o)}},function(e){return Object(D.b)({closeRefundDialog:Y.e,confirmRefund:Y.k},e)})(Object(v.localize)(X)),Q=n(594),Z=n(622),$=function(e){var t=e.orderId,n=e.siteId,a=e.reprintDialog,o=e.paperSize,i=e.storeOptions,r=e.labelId,s=e.translate,l=function(){return e.closeReprintDialog(t,n)},c=[{action:"cancel",label:s("Cancel"),onClick:l},{action:"confirm",onClick:function(){return e.confirmReprint(t,n)},isPrimary:!0,disabled:a&&!a.fileData,additionalClassNames:a&&a.isFetching?"is-busy":"",label:s("Print")}];return E.a.createElement(K.a,{isVisible:Boolean(a&&a.labelId===r),onClose:l,buttons:c,additionalClassNames:"label-reprint-modal woocommerce wcc-root"},E.a.createElement(W.a,null,s("Reprint shipping label")),E.a.createElement("p",null,s("If there was a printing error when you purchased the label, you can print it again.")),E.a.createElement("p",{className:"shipping-label__reprint-modal-notice"},s("NOTE: If you already used the label in a package, printing and using it again is a violation of our terms of service and may result in criminal charges.")),E.a.createElement(Q.a,{id:"paper_size",valuesMap:Object(Z.a)(i.origin_country),title:s("Paper size"),value:o,updateValue:function(a){return e.updatePaperSize(t,n,a)}}))};$.propTypes={siteId:k.a.number.isRequired,orderId:k.a.number.isRequired,reprintDialog:k.a.object,paperSize:k.a.string.isRequired,storeOptions:k.a.object.isRequired,labelId:k.a.number,closeReprintDialog:k.a.func.isRequired,confirmReprint:k.a.func.isRequired};var ee=Object(g.b)(function(e,t){var n=t.orderId,a=t.siteId,o=Object(J.t)(e,n,a),i=Object(J.j)(e,n,a);return{reprintDialog:o?i.reprintDialog:{},paperSize:i.paperSize,storeOptions:o?i.storeOptions:{}}},function(e){return Object(D.b)({closeReprintDialog:Y.f,confirmReprint:Y.l,updatePaperSize:Y.X},e)})(Object(v.localize)($)),te=n(637),ne=n(549),ae=function(e){var t=e.orderId,n=e.siteId,a=e.isVisible,o=e.labelIndex,i=e.serviceName,r=e.packageName,s=e.productNames,l=e.canManagePayments,c=e.receiptId,u=e.translate,p=function(){return e.closeDetailsDialog(t,n)},d=[{action:"close",label:u("Close"),onClick:p}];return E.a.createElement(K.a,{additionalClassNames:"label-details-modal woocommerce wcc-root",isVisible:a,onClose:p,buttons:d},E.a.createElement(W.a,{className:"shipping-label__label-details-modal-heading"},E.a.createElement("span",{className:"shipping-label__label-details-modal-heading-title"},u("Label #%(labelIndex)s details",{args:{labelIndex:o+1}})),l&&c?E.a.createElement("a",{href:"".concat(Object(te.a)(),"/me/purchases/billing/").concat(c),target:"_blank",rel:"noopener noreferrer"},u("Receipt")):null),E.a.createElement("dl",null,E.a.createElement("dt",null,u("Service")),E.a.createElement("dd",null,i),E.a.createElement("dt",null,u("Package")),E.a.createElement("dd",null,r),E.a.createElement("dt",null,u("Items")),E.a.createElement("dd",null,E.a.createElement("ul",null,s.map(function(e,t){return E.a.createElement("li",{key:t},e)})))))};ae.propTypes={siteId:k.a.number.isRequired,orderId:k.a.number.isRequired,isVisible:k.a.bool,serviceName:k.a.string,packageName:k.a.string,productNames:k.a.array,closeDetailsDialog:k.a.func.isRequired,receiptId:k.a.number};var oe=Object(g.b)(function(e,t){var n=t.orderId,a=t.siteId,o=t.labelId,i=Object(J.t)(e,n,a),r=Object(J.j)(e,n,a).detailsDialog;return{isVisible:Boolean(i&&r&&r.labelId===o),canManagePayments:Object(ne.q)(e,a)}},function(e){return Object(D.b)({closeDetailsDialog:Y.c},e)})(Object(v.localize)(ae)),ie={usps:function(e){return"https://tools.usps.com/go/TrackConfirmAction.action?tLabels=".concat(e)},fedex:function(e){return"https://www.fedex.com/apps/fedextrack/?action=track&tracknumbers=".concat(e)},ups:function(e){return"https://www.ups.com/track?loc=en_US&tracknum=".concat(e)},dhlexpress:function(e){return"https://www.dhl.com/en/express/tracking.html?AWB=".concat(e,"&brand=DHL")}},re=function(e){var t=e.tracking,n=e.carrierId,a=e.translate;if(!t)return E.a.createElement("span",null,a("N/A"));var o=ie[n](t);return o?E.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o},t," ",E.a.createElement(R.a,{icon:"external",size:12})):E.a.createElement("span",null,t)};re.propTypes={tracking:k.a.string,carrierId:k.a.string};var se=Object(v.localize)(re),le=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"renderRefund",function(e,t,a,o){var i=n.props,r=i.orderId,s=i.siteId,l=i.translate,c="",u=!1;if(t?(c=l("Labels older than 30 days cannot be refunded."),u=!0):"usps"!==a||o||(c=l("USPS labels without tracking are not eligible for refund."),u=!0),u)return E.a.createElement(x.a,{position:"top left",text:c},E.a.createElement("button",{className:"popover__menu-item shipping-label__item-menu-reprint-expired",role:"menuitem",tabIndex:"-1"},E.a.createElement(R.a,{icon:"refund",size:18}),E.a.createElement("span",null," ",l("Request refund")," ")));return E.a.createElement(U,{onClick:function(){n.props.openRefundDialog(r,s,e)},icon:"refund"},l("Request refund"))}),b()(d()(n),"renderReprint",function(e,t){var a=n.props,o=a.orderId,i=a.siteId,r=a.translate;if(t)return E.a.createElement(x.a,{position:"top left",text:r("Label images older than 180 days are deleted by our technology partners for general security and data privacy concerns.")},E.a.createElement("button",{className:"popover__menu-item shipping-label__item-menu-reprint-expired",role:"menuitem",tabIndex:"-1"},E.a.createElement(R.a,{icon:"print",size:18}),E.a.createElement("span",null," ",r("Reprint")," ")));return E.a.createElement(U,{onClick:function(){n.props.openReprintDialog(o,i,e)},icon:"print"},r("Reprint shipping label"))}),b()(d()(n),"renderLabelDetails",function(e){var t=n.props,a=t.orderId,o=t.siteId,i=t.translate;return E.a.createElement(U,{onClick:function(){n.props.openDetailsDialog(a,o,e)},icon:"info-outline"},i("View details"))}),b()(d()(n),"renderPickup",function(e){var t=n.props.translate,a={usps:"https://tools.usps.com/schedule-pickup-steps.htm",fedex:"https://www.fedex.com/en-us/shipping/schedule-manage-pickups.html",ups:"https://wwwapps.ups.com/pickup/request",dhlexpress:"https://mydhl.express.dhl/us/en/schedule-pickup.html#/schedule-pickup#label-reference"};if(!a.hasOwnProperty(e))return null;return E.a.createElement(U,{onClick:function(){window.open(a[e],"_blank")},icon:"external"},t("Schedule a pickup"))}),n}return h()(t,e),r()(t,[{key:"renderCommercialInvoiceLink",value:function(){var e=this.props,t=e.translate,n=e.label.commercialInvoiceUrl;if(!n)return null;return E.a.createElement(U,{onClick:function(){window.open(n)},icon:"print"},t("Print customs form"))}},{key:"render",value:function(){var e=this.props,t=e.label,n=t.labelIndex,a=t.serviceName,o=t.packageName,i=t.productNames,r=t.receiptId,s=t.labelId,l=t.createdDate,c=t.refundableAmount,u=t.currency,p=t.showDetails,d=t.expiryDate,m=t.anonymized,h=t.usedDate,f=t.tracking,b=t.carrierId,g=t.commercialInvoiceUrl,v=e.siteId,y=e.orderId,k=e.translate,C=e.isModal,w=(new Date).getTime(),N=!1,_=!1;(m||h||d&&d<w)&&(N=!0);var R=(new Date).setDate((new Date).getDate()-30);return(m||h||l&&l<R)&&(_=!0),E.a.createElement("div",{className:"shipping-label__item"},E.a.createElement("p",{className:"shipping-label__item-detail"},k("%(service)s label (#%(labelIndex)d)",{args:{service:a,labelIndex:n+1}}),p&&E.a.createElement("span",null,!C&&E.a.createElement(B,{position:"bottom left"},this.renderLabelDetails(s),this.renderPickup(b),this.renderRefund(s,_,b,f),this.renderReprint(s,N),this.renderCommercialInvoiceLink(g)),E.a.createElement(oe,{siteId:v,orderId:y,labelIndex:n,serviceName:a,packageName:o,productNames:i,receiptId:r,labelId:s}),E.a.createElement(G,{siteId:v,orderId:y,createdDate:l,refundableAmount:c,currency:u,labelId:s}),E.a.createElement(ee,{siteId:v,orderId:y,labelId:s}))),p&&E.a.createElement("p",{className:"shipping-label__item-tracking"},k("Tracking #: {{trackingLink/}}",{components:{trackingLink:E.a.createElement(se,{carrierId:b,tracking:f})}})))}}]),t}(C.Component);le.propTypes={siteId:k.a.number.isRequired,orderId:k.a.number.isRequired,label:k.a.shape({serviceName:k.a.string.isRequired,labelIndex:k.a.number.isRequired,packageName:k.a.string.isRequired,productNames:k.a.string.isRequired,receiptId:k.a.number.isRequired,labelId:k.a.number.isRequired,createdDate:k.a.string.isRequired,refundableAmount:k.a.number.isRequired,currency:k.a.string.isRequired,showDetails:k.a.bool.isRequired,expiryDate:k.a.string.isRequired,anonymized:k.a.bool.isRequired,usedDate:k.a.string.isRequired,tracking:k.a.string.isRequired,carrierId:k.a.string.isRequired,commercialInvoiceUrl:k.a.string}).isRequired,isModal:k.a.bool.isRequired,openRefundDialog:k.a.func.isRequired,openReprintDialog:k.a.func.isRequired,openDetailsDialog:k.a.func.isRequired};var ce=Object(g.b)(null,function(e){return Object(D.b)({openRefundDialog:Y.y,openReprintDialog:Y.z,openDetailsDialog:Y.u},e)})(Object(v.localize)(le)),ue=function(e){function t(){return o()(this,t),l()(this,u()(t).apply(this,arguments))}return h()(t,e),r()(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.translate,a=t.serviceName,o=t.labelIndex;return E.a.createElement("div",{className:"shipping-label__item"},E.a.createElement("p",{className:"shipping-label__item-detail"},n("%(service)s label (#%(labelIndex)d)",{args:{service:a,labelIndex:o+1}}),E.a.createElement("br",null),n("Purchasing\u2026")))}}]),t}(le);le.propTypes={label:k.a.object.isRequired};var pe=Object(v.localize)(ue),de=n(619),me=function(e){function t(){var e,n,a;o()(this,t);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return a=l()(this,(e=u()(t)).call.apply(e,[this].concat(r))),b()(d()(a),"eventPropsByType",(n={},b()(n,N.a.INTERNAL_NOTE,function(e){return{icon:"aside",heading:(0,a.props.translate)("Internal note"),content:Object(de.a)(Object(de.b)(e.content))}}),b()(n,N.a.CUSTOMER_NOTE,function(e){return{icon:"mail",heading:(0,a.props.translate)("Note sent to customer"),content:Object(de.a)(Object(de.b)(e.content))}}),b()(n,N.a.LABEL_PURCHASING,function(e){return{icon:"sync",content:E.a.createElement(pe,{label:e,orderId:a.props.orderId,siteId:a.props.siteId})}}),b()(n,N.a.LABEL_PURCHASED,function(e){return{icon:"print",content:E.a.createElement(ce,{label:e,orderId:a.props.orderId,siteId:a.props.siteId,isModal:a.props.isModal})}}),b()(n,N.a.LABEL_REFUND_REQUESTED,function(e){var t=a.props.translate;return{icon:"time",content:E.a.createElement("div",null,t("%(service)s label (#%(labelNum)d) refund requested (%(amount)s)",{args:{service:e.serviceName,labelNum:e.labelIndex+1,amount:I()(e.amount,e.currency)}}))}}),b()(n,N.a.LABEL_REFUND_COMPLETED,function(e){var t=a.props.translate;return{icon:"refund",content:E.a.createElement("div",null,t("%(service)s label (#%(labelNum)d) refunded (%(amount)s)",{args:{service:e.serviceName,labelNum:e.labelIndex+1,amount:I()(e.amount,e.currency)}}))}}),b()(n,N.a.LABEL_REFUND_REJECTED,function(e){var t=a.props.translate;return{icon:"cross-small",content:E.a.createElement("div",null,t("%(service)s label (#%(labelNum)d) refund rejected",{service:e.serviceName,args:{labelNum:e.labelIndex+1}}))}}),b()(n,N.a.REFUND_NOTE,function(e){var t=a.props.translate;return{icon:"credit-card",heading:t("Refund"),content:E.a.createElement("div",null,t("Refunded %(amount)s",{args:{amount:I()(e.amount,e.currency)}}),E.a.createElement("br",null),e.reason)}}),b()(n,void 0,function(){return{}}),n)),b()(d()(a),"renderDefaultEvent",function(e){return{icon:"aside",heading:(0,a.props.translate)("Note"),content:e.content}}),a}return h()(t,e),r()(t,[{key:"render",value:function(){var e=this.props,t=e.moment,n=e.event,a=(this.eventPropsByType[n.type]||this.renderDefaultEvent)(n),o=a.icon,i=a.heading,r=a.content;return E.a.createElement("div",{className:"order-activity-log__note"},E.a.createElement("div",{className:"order-activity-log__note-meta"},E.a.createElement("span",{className:"order-activity-log__note-time"},t(n.timestamp).format("LT")),o&&E.a.createElement(R.a,{icon:o,size:24})),E.a.createElement("div",{className:"order-activity-log__note-body"},E.a.createElement("div",{className:"order-activity-log__note-type"},i),E.a.createElement("div",{className:"order-activity-log__note-content"},r)))}}]),t}(C.Component);b()(me,"propTypes",{customer_note:k.a.bool,date_created_gmt:k.a.string,note:k.a.string.isRequired}),b()(me,"propTypes",{event:k.a.object}),b()(me,"defaultProps",{event:{}});var he=Object(v.localize)(me),fe=n(591),be=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"onClick",function(){n.props.onClick(n.props.date)}),n}return h()(t,e),r()(t,[{key:"render",value:function(){var e=this.props,t=e.count,n=e.date,a=e.isOpen,o=e.moment,i=e.translate,r=o(n,"YYYYMMDD").format("ll"),s=E.a.createElement("div",null,E.a.createElement("h3",null,r),E.a.createElement("small",null,i("%(count)s event","%(count)s events",{count:t,args:{count:t}})));return E.a.createElement("div",{className:"order-activity-log__day"},E.a.createElement(fe.a,{onClick:this.onClick,className:"order-activity-log__day-header",expanded:a,header:s,screenReaderText:i("Show notes from %(date)s",{args:{date:r}})},this.props.children))}}]),t}(C.Component);b()(be,"propTypes",{count:k.a.number.isRequired,date:k.a.string.isRequired,isOpen:k.a.bool.isRequired,onClick:k.a.func.isRequired});var ge=Object(v.localize)(be);var ve=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"toggleOpenDay",function(e){n.setState(function(){return{openDay:e}})}),b()(d()(n),"renderNotes",function(){var e=n.props,t=e.days,a=e.eventsByDay,o=e.translate;return t.length?E.a.createElement("div",null,t.map(function(e){var t=a[e];return E.a.createElement(ge,{key:e,count:t.length,date:e,isOpen:e===n.state.openDay,onClick:n.toggleOpenDay},t.map(function(e){return E.a.createElement(he,{key:"".concat(e.type,"-").concat(e.key),event:e,orderId:n.props.orderId,siteId:n.props.siteId,isModal:n.props.isModal})}))})):E.a.createElement("p",null,o("No activity yet"))}),b()(d()(n),"renderPlaceholder",function(){return E.a.createElement("div",{className:"is-placeholder"},E.a.createElement(ge,{count:0,date:"",isOpen:!0,index:1,onClick:w.noop},E.a.createElement(he,null)))}),n}return h()(t,e),r()(t,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({openDay:Object(w.last)(Object(w.keys)(this.props.eventsByDay))})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=Object(w.last)(Object(w.keys)(e.eventsByDay));this.props.eventsByDay[t]||this.setState({openDay:t})}},{key:"render",value:function(){return this.props.isLoaded?this.renderNotes():this.renderPlaceholder()}}]),t}(C.Component);b()(ve,"propTypes",{orderId:k.a.number.isRequired,siteId:k.a.number.isRequired});t.a=Object(g.b)(function(e,t){var n=t.orderId||!1,a=Object(N.c)(e,n),o=Object(N.b)(e,n),i=o.length?function(e){var t={};return e.forEach(function(e){var n=Object(v.moment)(e.timestamp).format("YYYYMMDD");t[n]?t[n].push(e):t[n]=[e]}),Object(w.keys)(t).forEach(function(e){t[e]=Object(w.sortBy)(t[e],["timestamp","key"]).reverse()}),t}(o):{},r=i?Object(w.keys)(i):[];return r.sort().reverse(),{isLoaded:a,days:r,events:o,eventsByDay:i}})(Object(v.localize)(ve))},810:function(e,t,n){},811:function(e,t,n){},812:function(e,t,n){}}]);