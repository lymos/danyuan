(window.webpackJsonp=window.webpackJsonp||[]).push([[150],{547:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(1),r=n(625),s=n.n(r),c=(n(113),function(e){return e}),i=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return n.join()},o=function(e){return function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return e.map(function(e){return e.apply(void 0,[t].concat(a))})}};function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,l=Object(a.memoize)(e,r);return Array.isArray(n)&&(n=o(n)),Object.assign(function(e){for(var a=arguments.length,r=new Array(a>1?a-1:0),c=1;c<a;c++)r[c-1]=arguments[c];var i=n.apply(void 0,[e].concat(r));return Array.isArray(i)||(i=[i]),t&&!s()(i,t)&&l.cache.clear(),t=i,l.apply(void 0,[e].concat(r))},{memoizedSelector:l})}},548:function(e,t,n){"use strict";var a=n(532),r=n.n(a),s=n(535),c=n.n(s),i=n(10),o=n.n(i),l=n(528),u=n.n(l);t.a=function(e){var t=e.className,n=e.children,a=c()(e,["className","children"]);return o.a.createElement("fieldset",r()({},a,{className:u()(t,"form-fieldset")}),n)}},550:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"d",function(){return u}),n.d(t,"a",function(){return m}),n.d(t,"b",function(){return d});var a=n(535),r=n.n(a),s=n(1),c={debounce:s.debounce,isPlainObject:s.isPlainObject,uniqueId:s.uniqueId},i=(n(46),c.uniqueId);function o(e){return{noticeId:e,type:"NOTICE_REMOVE"}}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.id,s=r()(n,["id"]);return{type:"NOTICE_CREATE",notice:Object.assign({showDismiss:!0},s,{noticeId:a||i(),status:e,text:t})}}var u=l.bind(null,"is-success"),m=l.bind(null,"is-error"),d=l.bind(null,"is-info");l.bind(null,"is-warning"),l.bind(null,"is-plain")},551:function(e,t,n){"use strict";var a=n(532),r=n.n(a),s=n(535),c=n.n(s),i=n(10),o=n.n(i),l=n(12),u=n.n(l),m=n(528),d=n.n(m),p=n(35),g=function(e){var t=e.children,n=e.required,a=e.optional,s=e.translate,i=e.className,l=(e.moment,e.numberFormat,e.dangerouslySetInnerHTML),u=c()(e,["children","required","optional","translate","className","moment","numberFormat","dangerouslySetInnerHTML"]),m=l?null:o.a.createElement(o.a.Fragment,null,t,n&&o.a.createElement("small",{className:"form-label__required"},s("Required")),a&&o.a.createElement("small",{className:"form-label__optional"},s("Optional")));return o.a.createElement("label",r()({},u,{dangerouslySetInnerHTML:l,className:d()(i,"form-label")}),m)};g.propTypes={required:u.a.bool,optional:u.a.bool,children:u.a.node},t.a=Object(p.localize)(g)},553:function(e,t,n){"use strict";n.d(t,"a",function(){return N});var a=n(532),r=n.n(a),s=n(107),c=n.n(s),i=n(108),o=n.n(i),l=n(530),u=n.n(l),m=n(529),d=n.n(m),p=n(531),g=n.n(p),f=n(34),h=n.n(f),b=n(10),v=n.n(b),E=n(12),y=n.n(E),_=n(528),O=n.n(_),T=n(1),N=function(e){function t(){return c()(this,t),u()(this,d()(t).apply(this,arguments))}return g()(t,e),o()(t,[{key:"render",value:function(){var e=O()(this.props.className,"form-setting-explanation",{"no-validate":this.props.noValidate,"is-indented":this.props.isIndented});return v.a.createElement("p",r()({},Object(T.omit)(this.props,"className","noValidate","isIndented"),{className:e}),this.props.children)}}]),t}(v.a.Component);h()(N,"displayName","FormSettingExplanation"),h()(N,"propTypes",{noValidate:y.a.bool,isIndented:y.a.bool,className:y.a.string}),h()(N,"defaultProps",{noValidate:!1,isIndented:!1})},554:function(e,t,n){"use strict";var a=n(532),r=n.n(a),s=n(535),c=n.n(s),i=n(10),o=n.n(i),l=n(528),u=n.n(l);t.a=function(e){var t=e.className,n=e.children,a=c()(e,["className","children"]);return o.a.createElement("legend",r()({},a,{className:u()(t,"form-legend")}),n)}},556:function(e,t,n){"use strict";var a=n(532),r=n.n(a),s=n(535),c=n.n(s),i=n(10),o=n.n(i),l=n(528),u=n.n(l);t.a=function(e){var t=e.className,n=e.children,a=c()(e,["className","children"]);return o.a.createElement("h3",r()({},a,{className:u()(t,"form-section-heading")}),n)}},564:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(10),r=n.n(a);n(597);function s(e){var t=e.children;return r.a.createElement("span",{className:"screen-reader-text"},t)}},578:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var a=n(532),r=n.n(a),s=n(535),c=n.n(s),i=n(107),o=n.n(i),l=n(108),u=n.n(l),m=n(530),d=n.n(m),p=n(529),g=n.n(p),f=n(531),h=n.n(f),b=n(34),v=n.n(b),E=n(10),y=n.n(E),_=n(12),O=n.n(_),T=n(528),N=n.n(T),w=function(e){function t(){return o()(this,t),d()(this,g()(t).apply(this,arguments))}return h()(t,e),u()(t,[{key:"render",value:function(){var e=N()("button",this.props.className,{"is-compact":this.props.compact,"is-primary":this.props.primary,"is-scary":this.props.scary,"is-busy":this.props.busy,"is-borderless":this.props.borderless});if(this.props.href){var t=this.props,n=(t.compact,t.primary,t.scary,t.busy,t.borderless,t.type,c()(t,["compact","primary","scary","busy","borderless","type"])),a=n.target?(n.rel||"").replace(/noopener|noreferrer/g,"")+" noopener noreferrer":n.rel;return y.a.createElement("a",r()({},n,{rel:a,className:e}))}var s=this.props,i=(s.compact,s.primary,s.scary,s.busy,s.borderless,s.target,s.rel,c()(s,["compact","primary","scary","busy","borderless","target","rel"]));return y.a.createElement("button",r()({},i,{className:e}))}}]),t}(E.PureComponent);v()(w,"propTypes",{compact:O.a.bool,primary:O.a.bool,scary:O.a.bool,busy:O.a.bool,type:O.a.string,href:O.a.string,borderless:O.a.bool,target:O.a.string,rel:O.a.string}),v()(w,"defaultProps",{type:"button"})},593:function(e,t,n){"use strict";var a=n(10),r=n.n(a),s=n(12),c=n.n(s),i=n(528),o=n.n(i),l=n(836),u=n(556),m=function(e){var t=e.heading,n=e.children;return r.a.createElement(l.a,{className:o()("settings-group-card","card","is-compact")},t&&r.a.createElement(u.a,{className:"settings-group-card__heading"},t),r.a.createElement("div",{className:o()("settings-group-card__content",{"is-full-width":!t})},n))};m.propTypes={heading:c.a.node},t.a=m},595:function(e,t,n){"use strict";var a,r=n(34),s=n.n(r),c=n(36),i=n.n(c),o=n(1),l=n(46),u=Object(l.b)({},(a={},s()(a,"NOTICE_CREATE",function(e,t){var n=t.notice;return i()({},e,s()({},n.noticeId,n))}),s()(a,"NOTICE_REMOVE",function(e,t){var n=t.noticeId;return e.hasOwnProperty(n)?Object(o.omit)(e,n):e}),s()(a,"ROUTE_SET",function(e){return Object(o.reduce)(e,function(e,t,n){if(!t.isPersistent&&!t.displayOnNextPage)return e;var a=t;return a.displayOnNextPage&&(a=i()({},a,{displayOnNextPage:!1})),e[n]=a,e},{})}),a)),m=Object(l.b)({},s()({},"NOTICE_CREATE",function(e,t){var n=t.notice;return i()({},e,s()({},n.noticeId,Date.now()))}));t.a=Object(l.a)({items:u,lastTimeShown:m})},597:function(e,t,n){},598:function(e,t,n){"use strict";var a=n(647),r=["a","strong","em","u","tt","s"],s=["target","href"];t.a=function(e){return{__html:Object(a.sanitize)(e,{ALLOWED_TAGS:r,ALLOWED_ATTR:s})}}},629:function(e,t,n){"use strict";var a=n(10),r=n.n(a),s=n(12),c=n.n(s),i=n(553),o=n(598),l=function(e){var t=e.text;return t?r.a.createElement(i.a,{dangerouslySetInnerHTML:Object(o.a)(t)}):null};l.propTypes={text:c.a.string},t.a=l},689:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"b",function(){return m}),n.d(t,"a",function(){return d});var a={};n.r(a),n.d(a,"labelsPrint",function(){return c}),n.d(a,"labelTestPrint",function(){return i}),n.d(a,"selfHelp",function(){return o}),n.d(a,"refreshServiceData",function(){return l});var r=n(76),s="wc/v1/connect/",c=function(){return"".concat(s,"label/print")},i=function(){return"".concat(s,"label/preview")},o=function(){return"".concat(s,"self-help")},l=function(){return"".concat(s,"service-data-refresh")},u=function(e){if(e.data.message)throw e.data.message;throw JSON.stringify(e)},m=function(e,t){return Object(r.a)().post(e,t).catch(u)},d=function(e,t){return Object(r.a)().createGetUrlWithNonce(e,t)}},795:function(e,t,n){},797:function(e,t,n){},834:function(e,t,n){"use strict";n.r(t);var a,r=n(10),s=n.n(r),c=(n(795),n(34)),i=n.n(c),o=n(36),l=n.n(o),u=(a={},i()(a,"PLUGIN_STATUS_DEBUG_TOGGLE",function(e,t){var n=t.value;return l()({},e,{debug_enabled:n})}),i()(a,"PLUGIN_STATUS_LOGGING_TOGGLE",function(e,t){var n=t.value;return l()({},e,{logging_enabled:n})}),i()(a,"SERVICE_DATA_REFRESH",function(e,t){var n=t.value;return l()({},e,{health_items:l()({},e.health_items,{woocommerce_services:l()({},e.health_items.woocommerce_services,n)})})}),a),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return u[t.type]?u[t.type](e,t):e},d=n(109),p=n(35),g=n(548),f=n(554),h=n(618),b=n(12),v=n.n(b),E=n(537),y=n.n(E),_=n(528),O=n.n(_),T=function(e){var t,n,a=e.title,r=e.subtitle,c=e.state,i=e.message,o=e.children;switch(c){case"fetching":n="is-fetching",t="sync";break;case"success":n="is-success",t="checkmark-circle";break;case"warning":n="is-warning",t="notice";break;case"error":default:n="is-error",t="notice"}return s.a.createElement(g.a,null,s.a.createElement(f.a,null,s.a.createElement("span",null,a),r&&s.a.createElement("span",{className:"plugin-status__indicator-subtitle"},r)),s.a.createElement("div",{className:O()("plugin-status__indicator",n)},s.a.createElement("div",{className:"plugin-status__indicator-icon-and-message"},s.a.createElement("div",{className:"plugin-status__indicator-icon"},s.a.createElement(y.a,{icon:t})),s.a.createElement("div",{className:"plugin-status__indicator-message"},i)),o))};T.propTypes={title:v.a.string,subtitle:v.a.string,state:v.a.string,message:v.a.string,children:v.a.node};var N=T,w=n(77),S=n.n(w),j=n(553),k=n(535),x=n.n(k),A=n(1),L=n.n(A),I=n(689),C=n(550),D=function(){return function(e,t){var n=t().status,a={wcc_debug_on:n.debug_enabled,wcc_logging_on:n.logging_enabled};I.b(I.c.selfHelp(),a).then(function(){return e(Object(C.d)(Object(p.translate)("Your changes have been saved."),{duration:5e3}))}).catch(function(t){L.a.isString(t)&&e(Object(C.a)(t)),L.a.isObject(t)&&e(Object(C.a)(Object(p.translate)("There was a problem when saving your preferences. Please try again.")))})}},R={onRefreshClick:function(){return function(e){return I.b(I.c.refreshServiceData()).then(function(t){t.success;var n=x()(t,["success"]);e({type:"SERVICE_DATA_REFRESH",value:n}),e(Object(C.d)(Object(p.translate)("Service data refreshed.")))}).catch(function(){e(Object(C.a)(Object(p.translate)("An error occurred while refreshing service data.")))})}}},G=Object(d.b)(function(e){return{status:e.status.health_items.woocommerce_services}},R)(Object(p.localize)(function(e){var t,n,a=e.translate,c=e.moment,i=e.status,o=e.onRefreshClick,l=Object(r.useState)(!1),u=S()(l,2),m=u[0],d=u[1],p=Object(r.useCallback)(function(e){e.preventDefault(),d(!0),o().finally(function(){return d(!1)})},[o,d]),g=Date.now()/1e3;return i.has_service_schemas?i.timestamp?i.timestamp<g-i.error_threshold?(t="error",n=a("Service data was found, but is more than three days old")):i.timestamp<g-i.warning_threshold?(t="warning",n=a("Service data was found, but is more than one day old")):(t="success",n=a("Service data is up-to-date")):(t="warning",n=a("Service data found, but may be out of date")):(t="error",n=a("No service data available")),m&&(t="fetching"),s.a.createElement(N,{title:a("WooCommerce Shipping & Tax Data"),state:t,message:n},s.a.createElement(j.a,null,i.timestamp&&i.has_service_schemas?a("Last updated %s.",{args:c(1e3*i.timestamp).fromNow()}):null," ",s.a.createElement("a",{onClick:p,href:"#"},a("Refresh"))))})),P=n(593),U=Object(d.b)(function(e){return{healthItems:e.status.health_items}})(Object(p.localize)(function(e){var t=e.translate,n=e.healthItems;return s.a.createElement(P.a,{heading:t("Health",{context:"This section displays the overall health of WooCommerce Shipping & Tax and the things it depends on"})},s.a.createElement(N,{title:t("WooCommerce"),message:n.woocommerce.message,state:n.woocommerce.state}),s.a.createElement(N,{title:t("Jetpack"),state:n.jetpack.state,message:n.jetpack.message}),s.a.createElement(G,null))})),q=n(107),H=n.n(q),V=n(108),z=n.n(V),F=n(530),M=n.n(F),W=n(529),K=n.n(W),B=n(534),J=n.n(B),Y=n(531),Q=n.n(Y),X=n(532),Z=n.n(X),$=n(78),ee=n.n($),te=n(796),ne=n.n(te),ae=n(578);function re(e){var t=e.className,n=e.text,a=e.onCopy,r=void 0===a?A.noop:a,c=x()(e,["className","text","onCopy"]),i=s.a.useRef(),o=s.a.useRef(),l=s.a.useRef();return s.a.useEffect(function(){o.current=function(){return n},l.current=r},[n,r]),s.a.useEffect(function(){var e=ee.a.findDOMNode(i.current),t=new ne.a(e,{text:function(){return o.current()}});return t.on("success",function(){return l.current()}),function(){return t.destroy()}},[]),s.a.createElement(ae.a,Z()({},c,{ref:i,className:O()("clipboard-button",t)}))}re.propTypes={className:v.a.string,text:v.a.string,onCopy:v.a.func};var se=re,ce=n(551),ie=function(e){var t=e.className,n=e.isError,a=e.isValid,r=e.children,c=x()(e,["className","isError","isValid","children"]);return s.a.createElement("textarea",Z()({},c,{className:O()(t,"form-textarea",{"is-error":n,"is-valid":a})}),r)},oe=n(579),le=function(e){function t(){var e,n;H()(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=M()(this,(e=K()(t)).call.apply(e,[this].concat(r))),i()(J()(n),"onCopy",function(){var e=n.props.translate;oe.a.success(e("Log tail copied to clipboard"),{duration:2e3})}),n}return Q()(t,e),z()(t,[{key:"render",value:function(){var e=this.props,t=e.key,n=e.title,a=e.tail,r=e.url,c=e.count,i=e.translate,o="wcs-log-".concat(t);return s.a.createElement(g.a,null,s.a.createElement(ce.a,{htmlFor:o},n),s.a.createElement(ie,{id:o,name:o,readOnly:!0,value:a}),s.a.createElement(j.a,{className:"plugin-status__log-explanation"},s.a.createElement("span",{className:"plugin-status__log-explanation-span"},i("Last %s entry. {{a}}Show full log{{/a}}","Last %s entries. {{a}}Show full log{{/a}}",{args:[c],count:c,components:{a:s.a.createElement("a",{href:r})}})),s.a.createElement(se,{text:a,onCopy:this.onCopy,compact:!0},i("Copy for support"))))}}]),t}(r.Component);le.propTypes={title:v.a.string,logKey:v.a.string};var ue=Object(d.b)(function(e,t){var n=t.logKey;return e.status.logs[n]})(Object(p.localize)(le)),me=Object(d.b)(function(e){return{services:e.status.services}})(Object(p.localize)(function(e){var t=e.translate,n=e.moment,a=e.services;if(!1===a)return null;var r=function(e,a){return s.a.createElement(N,{key:a,title:e.title,subtitle:e.subtitle,state:e.state,message:e.message},function(e){var a=e.timestamp,r=e.url;return a>0?s.a.createElement(j.a,null,t("Request was made %s - check logs below or {{a}}edit service settings{{/a}}",{args:n(1e3*a).fromNow(),components:{a:s.a.createElement("a",{href:r})}})):s.a.createElement(j.a,null,s.a.createElement("a",{href:r},t("Edit service settings")))}(e))};return s.a.createElement(P.a,{heading:t("Services")},a.length?a.map(r):s.a.createElement(j.a,null,t("No services configured. {{a}}Add a shipping service{{/a}}",{components:{a:s.a.createElement("a",{href:"admin.php?page=wc-settings&tab=shipping"})}})))})),de=n(798),pe=(n(797),n(629)),ge=n(647),fe=function(e){return{__html:Object(ge.sanitize)(e,{ALLOWED_TAGS:["a","strong","em","u","tt","s"],ALLOWED_ATTR:["target","href"]})}},he=function(e){function t(){var e,n;H()(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return n=M()(this,(e=K()(t)).call.apply(e,[this].concat(r))),i()(J()(n),"renderToggleText",function(e){return e?s.a.createElement("span",{className:"toggle__text",dangerouslySetInnerHTML:fe(e)}):null}),i()(J()(n),"handleChangeEvent",function(){var e=n.props;(0,e.onUpdate)(!e.checked)}),n}return Q()(t,e),z()(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.title,a=e.description,r=e.trueText,c=e.falseText,i=e.checked,o=e.placeholder,l=e.className;return s.a.createElement(g.a,{className:l},s.a.createElement(ce.a,{htmlFor:t,dangerouslySetInnerHTML:fe(n)}),s.a.createElement(de.a,{id:t,name:t,placeholder:o,checked:i,onChange:this.handleChangeEvent}),this.renderToggleText(i?r:c),s.a.createElement(pe.a,{text:a}))}}]),t}(r.Component);i()(he,"propTypes",{id:v.a.string.isRequired,title:v.a.string,description:v.a.string,trueText:v.a.string.isRequired,falseText:v.a.string.isRequired,checked:v.a.bool,onUpdate:v.a.func,className:v.a.string}),i()(he,"defaultProps",{checked:!1});var be=he,ve={onLoggingToggle:function(e){return function(t){t({type:"PLUGIN_STATUS_LOGGING_TOGGLE",value:e}),t(D())}},onDebuggingToggle:function(e){return function(t){t({type:"PLUGIN_STATUS_DEBUG_TOGGLE",value:e}),t(D())}}},Ee=Object(d.b)(function(e){return{isLoggingEnabled:Boolean(e.status.logging_enabled),isDebuggingEnabled:Boolean(e.status.debug_enabled)}},ve)(Object(p.localize)(function(e){var t=e.onLoggingToggle,n=e.onDebuggingToggle,a=e.isLoggingEnabled,r=e.isDebuggingEnabled,c=e.translate;return s.a.createElement("div",null,s.a.createElement(h.a,{id:"notices",notices:oe.a.list}),s.a.createElement(U,null),s.a.createElement(me,null),s.a.createElement(P.a,{heading:c("Debug")},s.a.createElement(be,{id:"wcs-toggle-debug",checked:r,title:c("Debug"),description:c("Display troubleshooting information on the Cart and Checkout pages."),trueText:c("Enabled"),falseText:c("Disabled"),onUpdate:n}),s.a.createElement(be,{id:"wcs-toggle-logging",checked:a,title:c("Logging"),description:c("Write diagnostic messages to log files. Helpful when contacting support."),trueText:c("Enabled"),falseText:c("Disabled"),onUpdate:t}),s.a.createElement(ue,{logKey:"shipping",title:c("Shipping Log")}),s.a.createElement(ue,{logKey:"taxes",title:c("Taxes Log")}),s.a.createElement(ue,{logKey:"other",title:c("Other Log")})),s.a.createElement(P.a,{heading:c("Support")},s.a.createElement(g.a,null,s.a.createElement(f.a,null,c("Need help?")),s.a.createElement("p",{className:"plugin-status__help-description"},c("Our team is here for you. View our {{docsA}}support docs{{/docsA}} or {{ticketA}}open a support ticket{{/ticketA}}.",{components:{docsA:s.a.createElement("a",{href:"https://docs.woocommerce.com/document/woocommerce-shipping-and-tax/",target:"_blank",rel:"noopener noreferrer"}),ticketA:s.a.createElement("a",{href:"https://woocommerce.com/my-account/create-a-ticket/",target:"_blank",rel:"noopener noreferrer"})}})))))})),ye=n(595),_e=n(46);t.default=function(e){var t=e.formData;return{getReducer:function(){return Object(_e.a)({status:m,notices:ye.a})},getInitialState:function(){return{status:t}},getStateForPersisting:function(){return null},getStateKey:function(){return"wcs-admin-status"},View:function(){return s.a.createElement(Ee,null)}}}}}]);